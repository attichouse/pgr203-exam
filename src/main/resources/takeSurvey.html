<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Take Survey</title>
        <link rel="stylesheet" href="css/style.css">
    </head>
    <body>
        <main>
            <h1>Take survey</h1>

            <p><label>Choose survey: <select name="survey" id="surveys" onchange="fillQuestions()"></select></label></p>

            <form action="/api/newAnswer" method="post">
                <ul id="qa">
                </ul>
                <p><button>Submit</button></p>
            </form>
            <p><a href="index.html"><button>Back</button></a></p>
        </main>
    </body>
    <script>
        fetch("/api/surveyOptions").then(function(res) {
            return res.text()
        }).then(function(text) {
            document.getElementById("surveys").innerHTML = text;
            document.getElementById("surveys").selectedIndex = -1;
        });
        function fillQuestions() {
            var sid = document.getElementById("surveys").value;
            fetch("/api/questionOptions?surveyid="+sid).then(function(res) {
                return res.text()
            }).then(function (text) {
                document.querySelector("#qa").innerHTML = text;
            })
        }

    </script>
</html>